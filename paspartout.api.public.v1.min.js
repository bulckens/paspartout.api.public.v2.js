/*
 * Paspartout.com public API wrapper for JavaScript 0.0.1
 *
 * Copyright (c) 2011 Wout Fierens
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
var Paspartout=Paspartout||{Api:{},config:{url:'http://api.paspartout.com/public/v1'}};Paspartout.Api.Public={load:function(o){var self=this,source;if(typeof Paspartout.config.siteId==='undefined'){if(o.failure)
o.failure('Paspartout.Config.siteId has not been defined!');return false;}
source=Paspartout.config.url+'/'+Paspartout.config.siteId+o.path+'.js?variable='+o.variable;if(o.includeAssets===true)
source+='&include_assets=1';if(o.includeChildren===true)
source+='&include_children=1';if(o.includeComments===true)
source+='&include_comments=1';if(typeof Paspartout.Cache[source]==='undefined'||o.force){var script=document.createElement('script');document.getElementsByTagName('head')[0].appendChild(script);script.type='text/javascript';script.src=source;script.onload=function(){var data=eval(o.variable);if(typeof data==='object'){if(data.error){if(o.failure)
o.failure(data.error.code+': '+data.error.message);}else if(o.success){o.success(data);Paspartout.Cache[source]=data;}}else if(o.failure){o.failure('No data has been returned from the server!');}};}else if(o.success){o.success(Paspartout.Cache[source]);}}};Paspartout.Site={load:function(o){o=o||{};o.path='';if(typeof o.variable==='undefined')
o.variable='PPSiteData';Paspartout.Api.Public.load(o);}};Paspartout.Page={all:function(o){o=o||{};o.path='/pages';if(typeof o.variable==='undefined')
o.variable='PPPagesData';Paspartout.Api.Public.load(o);},load:function(id,o){var o=o||{};if(typeof id==='undefined'){if(o.failure)
o.failure('No page id given!');return false;}
o.path='/pages/'+id;if(typeof o.variable==='undefined')
o.variable='PPPageData';Paspartout.Api.Public.load(o);}};Paspartout.Comment={all:function(o){o=o||{};if(typeof o.pageId==='undefined')
o.path='/comments';else
o.path='/pages/'+o.pageId+'/comments';if(typeof o.variable==='undefined')
o.variable='PPCommentsData';Paspartout.Api.Public.load(o);}};Paspartout.Cache={};